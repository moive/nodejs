<%- include("template/head", title) %>
    <div class="container">
        <h1>Detail pet</h1>
        <% if (error) { %>
            <p><%= message %></p>
            <a href="/pets" class="btn btn-dark">Return to pets</a>
        <% } %>

        <% if(!error) {%>
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><%= pet.id %></td>
                        <td><%= pet.name %></td>
                        <td><%= pet.description %></td>
                        <td>
                            <button class="btn btn-danger btn-sm" id="btnDelete" data-id="<%= pet.id%>">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        <% } %>
    </div>

    <script>
        const btnDelete = document.querySelector("#btnDelete");
        btnDelete.addEventListener("click", async ()=>{
            const id = btnDelete.dataset.id;
            // console.log(id);
            try {
                const data = await fetch(`/pets/${id}`,{
                    method: 'delete'
                });
                const res = await data.json();
                // console.log(res);

                if (res.status) location.href = "/pets"
                else console.log(res);

            } catch (error) {
                console.log(error);
            }
        });
    </script>